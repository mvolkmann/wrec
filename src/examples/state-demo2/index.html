<!DOCTYPE html>
<html lang="en">
  <head>
    <title>wrec State Demo</title>
    <script src="./component-one.js" type="module"></script>
    <script src="./component-two.js" type="module"></script>
    <script src="../labeled-input.js" type="module"></script>
    <script src="../radio-group.js" type="module"></script>
    <script type="module">
      import {WrecState} from '../../wrec-state.js';

      window.onload = () => {
        // State objects must be created inside the onload handler
        // so they are recreated if the user refreshes the page.
        const state = new WrecState('vault', true, {
          color: 'red',
          team: {leader: {name: 'World'}},
          notUsed: 'not used'
        });

        const c1 = document.querySelector('component-one');
        // The keys are state property paths
        // and the values are component property names.
        c1.useState(state, {color: 'color', 'team.leader.name': 'name'});

        const c2 = document.querySelector('component-two');
        // When the mapping from state property paths to component properties
        // is not specified, they are assumed to be the same.
        c2.useState(state, {color: 'color', 'team.leader.name': 'name'});

        const removeBtn = document.getElementById('remove-btn');
        removeBtn.addEventListener('click', () => {
          c2.remove();
        });
      };
    </script>
  </head>
  <body>
    <component-one></component-one>
    <hr />
    <component-two color="green"></component-two>
    <hr />
    <button id="remove-btn">Remove component-two</button>
    <a href="./other-page.html">Next</a>
  </body>
</html>
